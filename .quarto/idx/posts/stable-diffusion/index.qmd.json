{"title":"Stable Diffusion for dummies","markdown":{"yaml":{"title":"Stable Diffusion for dummies","description":"A little informal guide to diffusion first timers.","author":"Harsh Sharma","date":"10/29/2023","image":"logo.png","categories":["Notes","Fastai Part2"],"format":{"html":{"code-fold":true}},"jupyter":"python3"},"headingText":"Generate random data for time steps and corresponding noise levels","containsRefs":false,"markdown":"\n\n```{python}\n#| label: timesteps\n#| fig-cap: \"An example of a noise-schedule wrt timesteps function\"\n\nimport matplotlib.pyplot as plt\nimport numpy as np\n\ntime_steps = np.arange(0, 1000, 1)  # Assuming 100 time steps\nnoise_levels =[-(x)**2 + 30*x + 2 for x in range(1,1001)] # Random noise levels between 0 and 1\n\n# Plotting the time-step noise schedule graph\nplt.figure(figsize=(10, 6))\nplt.plot(time_steps, noise_levels, color='b', label='Noise Levels')\nplt.xlabel('Time Steps')\nplt.ylabel('Noise Level')\nplt.legend()\nplt.show()\n```\n\n# Stable Diffusion for dummies\n\nMost people reading this have probably heard of image generation through AI at some point in time. If you're among those who haven't, then this journey will be even better as I go in some fair detail to explain what it is.\n\nIf at any point, the things I talk about seem hard, don't be discouraged as it's more of a shock if you find this easy to read. Nevertheless, buckle up because although we might not go all the way into the deep-end (I don't know enough stuff yet for that), I think we'll still get to dip our toes.\n\n![](buckleup.gif)\n\n## Cool pics to pump you up:\n\n\\\n\nI'll just let the images speak.  \n\n\\\n\n![cozy warm image of an indian male programmer sitting near a beautiful pond, scenic, matches white background, beautiful](img3.jpg)\n\n\\\n\n![Dune arakis in the background. Paul Atreides giving speech. Crowd listening is charged, ominous foreboding theme.](img4.jpg)\n\n\\\n\n![nspiring landscape poster showing humanity as a multiplanetary species, sprawling metropolis with large structures, awe-inspiring, 1920x1080 image, outer space](img5.jpg)\n\n\\\n\nAll of the above were generated with simple but detailed text prompts.\n\\\nProbability of Noise:\n\n$$\\nabla_X P(X)$$\n\n```{mermaid}\nflowchart LR\n  I1(img1) --> F((Magic Function))\n  I2(img2) --> F\n  I3(img3) --> F\n  F --> O1(\"P(img1)\")\n  F --> O2(\"P(img2)\")\n  F --> O3(\"P(img3)\")\n\n```\n\n\\\n\n```{mermaid}\nflowchart LR\n    B[\"Randomly selected sequential noise\"] -->  X((+))\n    X --> A[\"Somewhat noisy latent\"] --> C((\"Diffusion Model\"))\n    C --> D(\"Predicted Noise\") --> - --> A\n    A --> E[\"Less noisy latent\"]\n    F[\"Randomly Selected Noise\"] --> Z((+)) --> E -->\n    G((\"Updated Diffusion Model\")) --> H(\"Predicted Noise\")\n    H --> Y[-] --> E\n```\n\n\\\n\n| Model             | Input                  | Output      | Notes              |\n| ----------------- | ---------------------- | ----------- | ------------------ |\n| Unet              | somewhat noisy latents | the noise   | -                  |\n| VAE Decoder       | small latents tensor   | large image | guided by captions |\n| CLIP text encoder | text                   | embedding   | -                  |\n","srcMarkdownNoYaml":"\n\n```{python}\n#| label: timesteps\n#| fig-cap: \"An example of a noise-schedule wrt timesteps function\"\n\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n# Generate random data for time steps and corresponding noise levels\ntime_steps = np.arange(0, 1000, 1)  # Assuming 100 time steps\nnoise_levels =[-(x)**2 + 30*x + 2 for x in range(1,1001)] # Random noise levels between 0 and 1\n\n# Plotting the time-step noise schedule graph\nplt.figure(figsize=(10, 6))\nplt.plot(time_steps, noise_levels, color='b', label='Noise Levels')\nplt.xlabel('Time Steps')\nplt.ylabel('Noise Level')\nplt.legend()\nplt.show()\n```\n\n# Stable Diffusion for dummies\n\nMost people reading this have probably heard of image generation through AI at some point in time. If you're among those who haven't, then this journey will be even better as I go in some fair detail to explain what it is.\n\nIf at any point, the things I talk about seem hard, don't be discouraged as it's more of a shock if you find this easy to read. Nevertheless, buckle up because although we might not go all the way into the deep-end (I don't know enough stuff yet for that), I think we'll still get to dip our toes.\n\n![](buckleup.gif)\n\n## Cool pics to pump you up:\n\n\\\n\nI'll just let the images speak.  \n\n\\\n\n![cozy warm image of an indian male programmer sitting near a beautiful pond, scenic, matches white background, beautiful](img3.jpg)\n\n\\\n\n![Dune arakis in the background. Paul Atreides giving speech. Crowd listening is charged, ominous foreboding theme.](img4.jpg)\n\n\\\n\n![nspiring landscape poster showing humanity as a multiplanetary species, sprawling metropolis with large structures, awe-inspiring, 1920x1080 image, outer space](img5.jpg)\n\n\\\n\nAll of the above were generated with simple but detailed text prompts.\n\\\nProbability of Noise:\n\n$$\\nabla_X P(X)$$\n\n```{mermaid}\nflowchart LR\n  I1(img1) --> F((Magic Function))\n  I2(img2) --> F\n  I3(img3) --> F\n  F --> O1(\"P(img1)\")\n  F --> O2(\"P(img2)\")\n  F --> O3(\"P(img3)\")\n\n```\n\n\\\n\n```{mermaid}\nflowchart LR\n    B[\"Randomly selected sequential noise\"] -->  X((+))\n    X --> A[\"Somewhat noisy latent\"] --> C((\"Diffusion Model\"))\n    C --> D(\"Predicted Noise\") --> - --> A\n    A --> E[\"Less noisy latent\"]\n    F[\"Randomly Selected Noise\"] --> Z((+)) --> E -->\n    G((\"Updated Diffusion Model\")) --> H(\"Predicted Noise\")\n    H --> Y[-] --> E\n```\n\n\\\n\n| Model             | Input                  | Output      | Notes              |\n| ----------------- | ---------------------- | ----------- | ------------------ |\n| Unet              | somewhat noisy latents | the noise   | -                  |\n| VAE Decoder       | small latents tensor   | large image | guided by captions |\n| CLIP text encoder | text                   | embedding   | -                  |\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"jupyter"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","theme":"slate","title-block-banner":true,"title":"Stable Diffusion for dummies","description":"A little informal guide to diffusion first timers.","author":"Harsh Sharma","date":"10/29/2023","image":"logo.png","categories":["Notes","Fastai Part2"],"jupyter":"python3"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}